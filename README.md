# Habit Reminder API

Backend-—á–∞—Å—Ç—å SPA –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è—Ö –∫–Ω–∏–≥–∏ ¬´–ê—Ç–æ–º–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏¬ª –î–∂–µ–π–º—Å–∞ –ö–ª–∏—Ä–∞.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–°–µ—Ä–≤–∏—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ–∑–¥–∞–≤–∞—Ç—å, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø–æ–ª–µ–∑–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–∫–∞—Ö. –ö–∞–∂–¥–∞—è –ø—Ä–∏–≤—ã—á–∫–∞ —Å–ª–µ–¥—É–µ—Ç —Ñ–æ—Ä–º—É–ª–µ:

> **—è –±—É–¥—É [–î–ï–ô–°–¢–í–ò–ï] –≤ [–í–†–ï–ú–Ø] –≤ [–ú–ï–°–¢–û]**

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- –ü–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏ —Å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ–º –∏–ª–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ –ø—Ä–∏—è—Ç–Ω—ã–º–∏ –ø—Ä–∏–≤—ã—á–∫–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —á–µ—Ä–µ–∑ Telegram
- –ü—É–±–ª–∏—á–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏ –¥–ª—è –æ–±–º–µ–Ω–∞ –æ–ø—ã—Ç–æ–º
- –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç 1 –¥–æ 7 –¥–Ω–µ–π

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: Django 5.2, Django REST Framework
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT (Simple JWT)
- **–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á**: Celery + Redis
- **Telegram –±–æ—Ç**: aiogram + FastAPI
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: drf-yasg (Swagger/Redoc)
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Django Test Framework, Coverage
- **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞**: Flake8, Black, isort

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é

- Python 3.13+
- PostgreSQL 12+
- Redis 6+
- Poetry (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏)

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/ViktorShadr/habit-reminder-api.git
cd habit-reminder-api
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Poetry (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
curl -sSL https://install.python-poetry.org | python3 -

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–æ–µ–∫—Ç–∞
poetry install --no-root
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –ø—Ä–∏–º–µ—Ä–∞ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ:

```bash
cp .env.example .env
```

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env`:

```env
# Django
SECRET_KEY=your-secret-key-here
DEBUG=True
ALLOWED_HOSTS=127.0.0.1,localhost

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DB_NAME=habit_reminder
DB_USER=postgres
DB_PASSWORD=your-password
DB_HOST=localhost
DB_PORT=5432

# Redis –¥–ª—è Celery
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Telegram –±–æ—Ç
TELEGRAM_BOT_TOKEN=your-bot-token
TELEGRAM_BOT_SECRET=your-secret-key
TELEGRAM_API_BASE_URL=http://127.0.0.1:8001
BACKEND_BASE_URL=http://127.0.0.1:8000
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
poetry run python manage.py makemigrations
poetry run python manage.py migrate
```

### 5. –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
poetry run python manage.py createsuperuser
```

### 6. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

#### –ó–∞–ø—É—Å–∫ Redis (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
```bash
redis-server
```

#### –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Django (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
```bash
poetry run python manage.py runserver
```

#### –ó–∞–ø—É—Å–∫ Celery Worker (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
```bash
poetry run celery -A config worker --loglevel=info
```

#### –ó–∞–ø—É—Å–∫ Celery Beat (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
```bash
poetry run celery -A config beat --loglevel=info
```

#### –ó–∞–ø—É—Å–∫ Telegram –±–æ—Ç–∞ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
```bash
cd telegram_bot
poetry run python run_bot.py
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å–∞–º:

- **Swagger UI**: http://127.0.0.1:8000/swagger/
- **ReDoc**: http://127.0.0.1:8000/redoc/

## üîå –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/users/login/` - –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/users/token/refresh/` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `POST /api/users/register/` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∞–º–∏
- `GET /api/habits/` - –°–ø–∏—Å–æ–∫ –ø—Ä–∏–≤—ã—á–µ–∫ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–∞–≥–∏–Ω–∞—Ü–∏—è –ø–æ 5)
- `POST /api/habits/` - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –ø—Ä–∏–≤—ã—á–∫–∏
- `GET /api/habits/{id}/` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏
- `PUT /api/habits/{id}/` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏
- `DELETE /api/habits/{id}/` - –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏
- `GET /api/habits/public/` - –°–ø–∏—Å–æ–∫ –ø—É–±–ª–∏—á–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º
- `GET /api/users/detail/me/` - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /api/users/detail/me/` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `DELETE /api/users/detail/me/` - –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram
- `POST /api/users/telegram/link/` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥–∞ –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏
- `POST /api/users/telegram/confirm/` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏ (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
poetry run python manage.py test

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
poetry run python -m coverage run --source='.' manage.py test
poetry run python -m coverage report --include="habits/*,users/*" --omit="*/migrations/*"

# HTML –æ—Ç—á–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏—è
poetry run python -m coverage html --include="habits/*,users/*" --omit="*/migrations/*"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
```bash
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
poetry run black habits users
poetry run isort habits users

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è
poetry run flake8 habits users --exclude=migrations --max-line-length=119
```

## üìä –ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –∫ –ø—Ä–∏–≤—ã—á–∫–∞–º:

1. **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: –Ω–µ –±–æ–ª–µ–µ 120 —Å–µ–∫—É–Ω–¥
2. **–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å**: –æ—Ç 1 –¥–æ 7 –¥–Ω–µ–π
3. **–ü—Ä–∏—è—Ç–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏**: –Ω–µ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –∏–ª–∏ —Å–≤—è–∑–∞–Ω–Ω—É—é –ø—Ä–∏–≤—ã—á–∫—É
4. **–ü–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏**: –º–æ–≥—É—Ç –∏–º–µ—Ç—å –ª–∏–±–æ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ, –ª–∏–±–æ —Å–≤—è–∑–∞–Ω–Ω—É—é –ø—Ä–∏—è—Ç–Ω—É—é –ø—Ä–∏–≤—ã—á–∫—É
5. **–°–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏**: —Ç–æ–ª—å–∫–æ –ø—Ä–∏–≤—ã—á–∫–∏ —Å –ø—Ä–∏–∑–Ω–∞–∫–æ–º "–ø—Ä–∏—è—Ç–Ω–∞—è"

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –∫–æ—Ä–æ—Ç–∫–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ access —Ç–æ–∫–µ–Ω–∞ (5 –º–∏–Ω—É—Ç)
- –ó–∞—â–∏—Ç–∞ –æ—Ç CORS –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–≤—ã—á–∫–∞–º
- –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ API Telegram –±–æ—Ç–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤

## üìà –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏: **95%**

- `habits/` - 96%
- `users/` - 89%
- –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏ –Ω–∞ 100%

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
habit-reminder-api/
‚îú‚îÄ‚îÄ config/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Django
‚îú‚îÄ‚îÄ habits/                 # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–µ–∫
‚îÇ   ‚îú‚îÄ‚îÄ models.py          # –ú–æ–¥–µ–ª–∏ –ø—Ä–∏–≤—ã—á–µ–∫
‚îÇ   ‚îú‚îÄ‚îÄ serializers.py     # –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ views.py           # View-–∫–ª–∞—Å—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ services.py        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ tasks.py           # –ó–∞–¥–∞—á–∏ Celery
‚îÇ   ‚îî‚îÄ‚îÄ tests/             # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ users/                  # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ models.py          # –ú–æ–¥–µ–ª—å User –∏ TelegramLink
‚îÇ   ‚îú‚îÄ‚îÄ serializers.py     # –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ views.py           # View-–∫–ª–∞—Å—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ services.py        # –°–µ—Ä–≤–∏—Å Telegram
‚îÇ   ‚îî‚îÄ‚îÄ tests/             # –¢–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ telegram_bot/           # Telegram –±–æ—Ç
    ‚îú‚îÄ‚îÄ main.py            # –õ–æ–≥–∏–∫–∞ –±–æ—Ç–∞
    ‚îú‚îÄ‚îÄ api.py             # FastAPI —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
    ‚îî‚îÄ‚îÄ run_bot.py         # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature-branch (`git checkout -b feature/amazing-feature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. Push –≤ branch (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ BSD License.

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ê–≤—Ç–æ—Ä: Viktor Shadrin  
Email: v.viktor.shadrin@gmail.com

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∫—É—Ä—Å–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã.